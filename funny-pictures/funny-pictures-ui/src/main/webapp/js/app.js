var funnyPicturesApp=angular.module("mainModule",["ngResource","ui.bootstrap","ngRoute","funnyControllers","ngMaterial","wu.masonry","pascalprecht.translate"]);funnyPicturesApp.factory("Pictures",["$resource","apiUrl",function(a,b){return a(b+"/pictures/:id",{},{query:{method:"GET",isArray:!1}})}]),funnyPicturesApp.factory("PicturesThumbnails",["$resource","apiUrl",function(a,b){return a(b+"/picturesthumb/:id",{},{query:{method:"GET",isArray:!1}})}]),funnyPicturesApp.factory("Funnies",["$resource","apiUrl",function(a,b){return a(b+"/funnies/:id",{},{query:{method:"GET",isArray:!1}})}]),funnyPicturesApp.factory("FunnyPicturesThumbnails",["$resource","apiUrl",function(a,b){return a(b+"/funniesthumb/:id",{},{query:{method:"GET",isArray:!1}})}]),funnyPicturesApp.factory("Feedback",["$resource","apiUrl",function(a,b){return a(b+"/feedbacks/:id",{},{query:{method:"GET",isArray:!1}})}]),funnyPicturesApp.service("FileUpload",["$http",function(a){function b(a){return a.data.message}function c(a){return a.data}this.uploadFileToUrl=function(d,e){var f=new FormData;f.append("content",d);var g=a.post(e,f,{transformRequest:angular.identity,headers:{content:"file","Content-Type":void 0}});return g.then(c,b)},this.uploadFileUrlToUrl=function(d,e){var f=a({url:e,method:"POST",headers:{content:"url"},params:{url:d}});return f.then(c,b)}}]),funnyPicturesApp.config(["$routeProvider",function(a){a.when("/home",{templateUrl:"html/home.html",controller:"HomeController"}).when("/createTemplate",{templateUrl:"html/createPicture.html",controller:"CreatePictureController"}).when("/createFunnyPicture/:templateId",{templateUrl:"html/createFunnyPicture.html",controller:"CreateFunnyPictureController"}).when("/preview/:funnyPictureId",{templateUrl:"html/funnyPicturePreview.html",controller:"PreviewFunnyController"}).when("/funnies",{templateUrl:"html/funnies.html",controller:"FunniesController"}).when("/contact",{templateUrl:"html/contact.html",controller:"ContactController"}).otherwise({redirectTo:"/home"})}]),funnyPicturesApp.directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){var a=new FileReader;a.onload=function(a){var b=$("#image-preview");b.fadeOut("fast",function(){b.attr("src",a.target.result),b.removeClass("hidden"),b.fadeIn("fast")})},a.readAsDataURL(c[0].files[0]),b.$apply(function(){f(b,c[0].files[0])})})}}}]),funnyPicturesApp.run(["$route","$rootScope","$location",function(a,b,c){var d=c.path;c.path=function(e,f){if(f===!1)var g=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=g,h()});return d.apply(c,[e])}}]),funnyPicturesApp.directive("header",function(){return{restrict:"E",templateUrl:"html/directives/header.html"}}),funnyPicturesApp.directive("footer",function(){return{restrict:"E",templateUrl:"html/directives/footer.html"}}),funnyPicturesApp.directive("tilesGallery",["$timeout",function(a){return{restrict:"A",link:function(b){b.$on("imageLoaded",function(){console.log("test"),a(function(){$("#final-tg").finalTilesGallery({minTileWidth:180,margin:15,gridCellSize:30})},0,!1)})}}}]),funnyPicturesApp.directive("onLastRepeat",function(){return function(a,b,c){a.$last&&setTimeout(function(){a.$emit("onRepeatLast",b,c)},1)}}),funnyPicturesApp.constant("apiUrl","http://localhost:8080/funny-pictures-rest-api/api");