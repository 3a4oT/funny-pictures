var funnyControllers=angular.module("funnyControllers",["pascalprecht.translate"]);funnyControllers.controller("HomeController",["$scope","$location","$mdToast","PicturesThumbnails","Funnies","apiUrl",function(a,b,c,d){a.headerText="",a.footerText="",a.currentPage=1,a.totalItems=0,a.itemsPerPage=15,a.thumbnailType="MEDIUM",d.query({offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType},function(b){a.pictureThumbnails=b.entities,a.totalItems=b.count,a.$broadcast("imageLoaded")},function(b){a.totalItems=0,c.show(c.simple().content("Error "+b.message).position("bottom left").hideDelay(5e3))}),a.pageChanged=function(){d.query({offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType},function(b){a.pictureThumbnails=b.entities,a.totalItems=b.count},function(b){a.totalItems=0,c.show(c.simple().content("Error "+b.message).position("bottom left").hideDelay(5e3))})},a.showPagination=function(){return a.totalItems>a.itemsPerPage},a.createFunnyPicture=function(a){b.path("/createFunnyPicture/"+a)},a.go=function(a){b.path(a)}}]),funnyControllers.controller("HeaderController",["$scope","$location","$translate",function(a,b,c){a.isActive=function(a){return a===b.path()},a.changeLanguage=function(a){c.use(a)},a.go=function(a){b.path(a)}}]),funnyControllers.controller("FunniesController",["$scope","$mdToast","FunnyPicturesThumbnails",function(a,b,c){a.funniesThumbnails={},a.currentPage=1,a.totalItems=0,a.itemsPerPage=15,a.thumbnailType="MEDIUM",c.query({offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType},function(b){a.funniesThumbnails=b.entities,a.totalItems=b.count},function(c){a.totalItems=0,b.show(b.simple().content("Error "+c.message).position("bottom left").hideDelay(5e3))}),a.pageChanged=function(){c.query({offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType},function(b){a.funniesThumbnails=b.entities,a.totalItems=b.count},function(c){a.totalItems=0,b.show(b.simple().content("Error "+c.message).position("bottom left").hideDelay(5e3))})},a.showPagination=function(){return a.totalItems>a.itemsPerPage}}]),funnyControllers.controller("PreviewFunnyController",["$scope","$routeParams","$http","$location","$window","$mdToast","apiUrl","Funnies",function(a,b,c,d,e,f,g,h){a.funnyPicture={},a.funniesByTemplate={},a.currentPage=1,a.totalItems=0,a.itemsPerPage=6,a.thumbnailType="MEDIUM",a.currentUrl=d.absUrl().split("#")[0]+"#/preview/",a.currentLocation=a.currentUrl+b.funnyPictureId,h.get({id:b.funnyPictureId},function(b){a.funnyPicture=b,c({url:g+"/pictures/"+a.funnyPicture.template.id+"/funniesThumb",method:"GET",params:{offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType}}).success(function(b){a.funniesByTemplate=b.entities,a.totalItems=b.count}).error(function(a){f.show(f.simple().content(a.statusText+" "+a.status).position("bottom left").hideDelay(5e3))})},function(a){f.show(f.simple().content("Error "+a.message).position("bottom left").hideDelay(5e3))}),a.pageChanged=function(){c({url:g+"/pictures/"+a.funnyPicture.template.id+"/funniesThumb",method:"GET",params:{offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType}}).success(function(b){a.funniesByTemplate=b.entities,a.totalItems=b.count}).error(function(a){f.show(f.simple().content(a.statusText+" "+a.status).position("bottom left").hideDelay(5e3))})},a.swapFunnyPicture=function(b){d.path("/preview/"+b.funnyPictureId,!1),a.currentLocation=a.currentUrl+b.funnyPictureId,h.get({id:b.funnyPictureId},function(b){a.funnyPicture=b},function(a){f.show(f.simple().content("Error "+a.message).position("bottom left").hideDelay(5e3))})},a.shareSocial=function(b,c,d){var f=b+encodeURIComponent(a.currentLocation);event.preventDefault(),e.open(f,"_blank","width="+c+",height="+d)},a.showPagination=function(){return a.totalItems>a.itemsPerPage}}]),funnyControllers.controller("CreatePictureController",["$scope","$location","$window","$mdToast","FileUpload","apiUrl","Pictures",function(a,b,c,d,e,f,g){a.pictureTitle="",a.pictureUrl="",a.uploadFile=function(){var c=f+"/content",h=a.myFile,i=a.pictureUrl;if(h||i){var j={};h?j=e.uploadFileToUrl(h,c):i&&(j=e.uploadFileUrlToUrl(i,c)),j.then(function(c){var e={name:a.pictureTitle,url:c.path};g.save(e,function(a){d.show(d.simple().content("File "+a.name+" uploaded to server!").position("bottom left").hideDelay(5e3)),b.path("/home")},function(a){d.show(d.simple().content("Error "+a.message).position("bottom left").hideDelay(5e3))})})}else d.show(d.simple().content("Please select the image!").position("bottom left").hideDelay(5e3))},a.isButtonDisabled=function(){return!a.templateInputForm.$valid},a.callUpload=function(){$("#upload").click()}}]),funnyControllers.controller("CreateFunnyPictureController",["$scope","$routeParams","$window","$http","$mdDialog","$mdToast","apiUrl","Pictures","Funnies",function(a,b,c,d,e,f,g,h,i){a.template={},a.funnyPicture={},a.funniesByTemplate={},a.currentPage=1,a.totalItems=0,a.itemsPerPage=6,a.thumbnailType="MEDIUM",a.progress=!1,a.loaded=!1,h.get({id:b.templateId},function(b){a.template=b,d({url:g+"/pictures/"+a.template.id+"/funniesThumb",method:"GET",params:{offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType}}).success(function(b){a.funniesByTemplate=b.entities,a.totalItems=b.count}).error(function(a){f.show(f.simple().content(a.statusText+" "+a.status).position("bottom left").hideDelay(5e3))})}),a.pageChanged=function(){d({url:g+"/pictures/"+a.template.id+"/funniesThumb",method:"GET",params:{offset:(a.currentPage-1)*a.itemsPerPage,limit:a.itemsPerPage,thumbnailType:a.thumbnailType}}).success(function(b){a.funniesByTemplate=b.entities,a.totalItems=b.count}).error(function(a){f.show(f.simple().content(a.statusText+" "+a.status).position("bottom left").hideDelay(5e3))})},a.createFunnyPicture=function(){a.progress=!0;var b=new Object;b.name=a.template.name,b.header=a.headerText,b.footer=a.footerText,b.template={},b.template.id=a.template.id,i.save(b,function(b){a.funnyPicture=b,a.pageChanged(),a.progress=!1,a.loaded=!0},function(b){a.progress=!1,f.show(f.simple().content("Can't create picture "+b.statusText+" "+b.status).position("bottom left").hideDelay(5e3))})},a.cancel=function(){d({url:g+"/funnies/"+a.funnyPicture.id,method:"DELETE"}).success(function(){a.pageChanged(),a.loaded=!1,a.funnyPicture={}}).error(function(a){f.show(f.simple().content("Funny picture has not been deleted "+a.statusText+" "+a.status).position("bottom left").hideDelay(5e3))})},a.createNew=function(){a.headerText="",a.footerText="",a.loaded=!1,a.funnyPicture={}},a.isButtonDisabled=function(){return!a.funnyPictureText.$valid},a.showPagination=function(){return a.totalItems>a.itemsPerPage}}]),funnyControllers.controller("ContactController",["$scope","$mdToast","Feedback",function(a,b,c){a.feedback={},a.sendFeedback=function(){c.save(a.feedback,function(){b.show(b.simple().content("Thank you "+a.feedback.name+", your feedback was sent.").position("bottom left").hideDelay(5e3))},function(a){b.show(b.simple().content("Feedback can't sent "+a.statusText+" "+a.status).position("bottom left").hideDelay(5e3))})},a.isButtonDisabled=function(){return!a.contactForm.$valid}}]),funnyControllers.config(["$translateProvider",function(a){a.translations("en_US",{CONTACT_HEADER:"Feel free to contact us",NAME_LABEL:"Name",EMAIL_LABEL:"Email",SUBJECT_LABEL:"Subject",MESSAGE_LABEL:"Message",SEND_MESSAGE_BUTTON:"Send Message",OUR_CONTACTS_LABEL:"Our contacts",ADDRESS:"12 Storozhenka St., Lviv",CITY:"[Galicia] Ukraine",UPLOAD_PICTURE_HEADER:"Upload your template",TEMPLATE_TITLE_LABEL:"Template title",IMAGE_URL_LABEL:"Input image url",OR_LABEL:"or",OPEN_IMAGE_BUTTON:"Open image",FILE_NAME_LABEL:"File name",UPLOAD_IMAGE_BUTTON:"Upload file",DOWNLOAD_LABEL:"Download",SHARE_LABEL:"Share",HEADER_TEXT_LABEL:"Header text",FOOTER_TEXT_LABEL:"Footer text",CREATE_FUNNY_BUTTON:"Create picture",CANCEL_BUTTON:"Cancel",CREATE_NEW_BUTTON:"Create new",HOME_HEADER:"Templates",CREATE_TEMPLATE_HEADER:"Create template",FUNNY_PICTURES_HEADER:"Funny pictures",CONTACT_US_HEADER:"Contact us"}),a.translations("uk",{CONTACT_HEADER:"Зв'яжіться з нами",NAME_LABEL:"Ім'я",EMAIL_LABEL:"Email",SUBJECT_LABEL:"Тема",MESSAGE_LABEL:"Повідомлення",SEND_MESSAGE_BUTTON:"Відслати",OUR_CONTACTS_LABEL:"Наші контакти",ADDRESS:"вул.Стороженка 12, Львів",CITY:"[Галичина] Україна",UPLOAD_PICTURE_HEADER:"Завантажте ваше зображення",TEMPLATE_TITLE_LABEL:"Назва картинки",IMAGE_URL_LABEL:"Введіть URL-адресу зображення",OR_LABEL:"або",OPEN_IMAGE_BUTTON:"Відкрити зображення",FILE_NAME_LABEL:"Назва файлу",UPLOAD_IMAGE_BUTTON:"Завантажити зображення",DOWNLOAD_LABEL:"Завантажити",SHARE_LABEL:"Поділитися",HEADER_TEXT_LABEL:"Верхній текст",FOOTER_TEXT_LABEL:"Нижній текст",CREATE_FUNNY_BUTTON:"Створити мем",CANCEL_BUTTON:"Відмінити",CREATE_NEW_BUTTON:"Створити новий мем",HOME_HEADER:"Шаблони",CREATE_TEMPLATE_HEADER:"Створити шаблон",FUNNY_PICTURES_HEADER:"Картинки",CONTACT_US_HEADER:"Контакти"}),a.determinePreferredLanguage(),a.fallbackLanguage("en_US")}]);